---
layout: post
title: "Apache ab jmeter test"
date: 2018-11-19 14:34
categories: ApacheBench
---
工作中，偶尔会遇到需要对服务器做压力的场景。一般来说，一个完整的压测，我们需要清楚地知道怎么测试，并搜集必要的指标。
下面是一些可行的压测方案：

可能的坑点
1、客户端并发提不上去，测不出服务器实际并发上限。

压测需要得出结论：
压测过程中，服务器负载情况。CPU、内存、硬盘、网络I/O等使用情况。

之前对服力器做了优化，但是优化的具体情况要拿数据对照。现就对服务器压测做一些总结：
短信平台的压测，需要优化前的数据和压测后的数据对比

web服务的瓶颈一般在mysql，实测表明，单台mysql并发写500-1000即会超时。
所以如果要提高系统的QPS，吞吐量，要从mysql服务着手。
可选的方案，如果对事务没有要求，可先用redis缓存，然后异步写库。

```
ab -n 1000 -c 1000 http url
```
-n: Number of requests to perform

-c: Number of multiple requests to make at a time
```
jmeter -n -t scriptfile.jmx -l report/output.res -e -o report/index
```
scriptfile.jmx: 测试脚本 

report/output.res: 生成报告数据文件（不能为已存在的文件）

report/index: 生成报告存放目录（不能为已存在的目录）

为高并发的优化设置 mysql,redis,php slow log 
